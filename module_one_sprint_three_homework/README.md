# Домашняя работа к третьему спринту курса Yandex Practicum

---
## Что внутри

- **REST-контроллер** `PostController` (`/api/posts`):
    - `GET /api/posts` — получить список сообщений.
    - `GET /api/posts/{id}` — получить сообщение по ID.
    - `POST /api/posts` — создать новое сообщение.
    - `PUT /api/posts/{id}` — редактировать конкретное сообщение.
    - `DELETE /api/posts/{id}` — удалить сообщение.
    - `POST /api/posts/{id}/likes` — поставить лайк.
    - `PUT /api/post/{id}/image` — загрузить изображение к сообщению.
    - `GET /api/post/{id}/image` — скачать изображение к сообщению.
    - `GET /api/post/undefined/comments` — обработчик мусорного обращения фронтэнда

- **REST-контроллер** `CommentController` (`/api/posts/{postid}/comments`):
    - `GET /api/posts/{postid}/comments` — получить список комментариев к сообщению postid.
    - `GET /api/posts/{postid}/comments/{id}` — получить комментарий по ID (JSON).
    - `POST /api/posts/{postid}/comments` — создать новый комментарий к сообщению postid. 
    - `PUT /api/posts/{postid}/comments/{id}` — редактировать конкретный комментарий.
    - `DELETE /api/posts/{postid}/comments/{id}` — удалить комментарий.

GET /api/posts


- **DAO-слой**: 
`Services` - ничего выдающегося. Реализовал в PostServices работу с файлами и парсер поисковых паттернов.
	
`JdbcNativePostRepository` и `JdbcNativeCommentRepository` на `JdbcTemplate`  
  Методы: стандартные CRUD

- **Тесты**:
    - Основные усилия направил на интеграционные тесты, много нового узнал, спасибо составителям 
курса и авторам статей в сети.
    - Юнит тесты попробовал на PostService, замокировал парсер сообщений. Не отработал файловые операции, не успел.
    - Взможно, перестарался с однотипными тестами, но старался обеспечить покрытие.

---

## Что не удалось
    Не отработал с сообщением в Markdown. Просто порезал по 128 символов.
## Что понравилось
    Функциональное программирование. Раньше с ними не сталкивался
## Что удивило
    Затраты на разработку тестов оказались выше, чем сама разработка.
## Что отметил на будущее
    Тесты это круто. В процессе тестирования нашел несколько багов в программе и несколько пробелов в образовании.
    Тесты лучше писать сразу с разработкой. Это сильно упростит и ускорит процесс отладки.
